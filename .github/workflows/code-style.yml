name: code-style

on: [ push, pull_request ]

permissions: write-all

jobs:
    style:
        runs-on: ubuntu-latest

        name: ${{ [[ github.event_name == 'push' && github.ref == 'refs/heads/main' ]] && echo "Fix" || echo "Check" }}

        steps:
            -   name: Checkout code
                uses: actions/checkout@v3

            -   name: Update git branch
                run: git pull

            -   name: Check the code style
                uses: TheDragonCode/codestyler@v3
                with:
                    github_token: ${{ secrets.COMPOSER_TOKEN }}
                    fix: ${{ github.event_name == 'push' && github.ref == 'refs/heads/main' }}
                    editorconfig: false
